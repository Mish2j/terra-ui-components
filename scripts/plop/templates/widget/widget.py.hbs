import importlib.metadata

import anywidget
import traitlets

try:
    __version__ = importlib.metadata.version("terra-{{name}}")
except importlib.metadata.PackageNotFoundError:
    __version__ = "unknown"


class {{className}}(anywidget.AnyWidget):
    _esm = """
    function render({ model, el }) {
        // load the component library in the <head> tag
        let terraAutoloader = document.createElement('script')
        terraAutoloader.src = "https://cdn.jsdelivr.net/npm/@nasa-terra/components@0.0.7/cdn/terra-ui-components-autoloader.js"
        terraAutoloader.type = 'module'
        document.querySelector('head').appendChild(terraAutoloader)

        // create an instance of the component
        let component = document.createElement('terra-{{name}}')
        
        // Set initial property values from the component's @property decorators
        // Properties will be populated here once the component is created
        
        el.appendChild(component)

        // Event listeners will be added here once the component is created
        
        // Property change handlers will be added here once the component is created
    }

    export default { render };
    """

    # Properties will be automatically added here based on the component's @property decorators
    value = traitlets.Unicode('').tag(sync=True)